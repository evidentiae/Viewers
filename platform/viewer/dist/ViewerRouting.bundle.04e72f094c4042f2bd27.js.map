{"version":3,"sources":["webpack:///./routes/ViewerRouting.js"],"names":["UrlUtil","utils","urlUtil","getSeriesInstanceUIDs","seriesInstanceUIDs","routeLocation","queryFilters","queryString","getQueryFilters","querySeriesUIDs","_seriesInstanceUIDs","paramString","parseParam","ViewerRouting","routeMatch","match","location","params","project","dataset","dicomStore","studyInstanceUIDs","console","log","authToken","useQuery","get","user","getAccessToken","server","useServer","studyUIDs","seriesUIDs","propTypes","PropTypes","shape","string","isRequired","any"],"mappings":"2FAAA,0FAOiBA,EAAYC,IAArBC,QAOFC,EAAwB,SAACC,EAAoBC,GACjD,IAAMC,EAAeN,EAAQO,YAAYC,gBAAgBH,GACnDI,EAAkBH,GAAgBA,EAAY,kBAC9CI,EAAsBN,GAAsBK,EAElD,OAAOT,EAAQW,YAAYC,WAAWF,IAGxC,SAASG,EAAT,GAAuE,IAAvCC,EAAuC,EAA9CC,MAA6BV,EAAiB,EAA3BW,SAA2B,EAQjEF,EAAWG,OANbC,EAFmE,EAEnEA,QACAF,EAHmE,EAGnEA,SACAG,EAJmE,EAInEA,QACAC,EALmE,EAKnEA,WACAC,EANmE,EAMnEA,kBACAjB,EAPmE,EAOnEA,mBAGFkB,QAAQC,IAAI,oBAMZ,IACMC,EADMC,cACYC,IAAI,SAExBF,IACFG,IAAKC,eAAiB,kBAAMJ,IAG9B,IAAMK,EAASC,YAAU,CAAEZ,UAASF,WAAUG,UAASC,eACjDW,EAAY/B,EAAQW,YAAYC,WAAWS,GAC3CW,EAAa7B,EAAsBC,EAAoBC,GAE7D,OAAIwB,GAAUE,EAEV,kBAAC,IAAD,CACEV,kBAAmBU,EACnB3B,mBAAoB4B,IAKnB,KAGTnB,EAAcoB,UAAY,CACxBlB,MAAOmB,IAAUC,MAAM,CACrBlB,OAAQiB,IAAUC,MAAM,CACtBd,kBAAmBa,IAAUE,OAAOC,WACpCjC,mBAAoB8B,IAAUE,OAC9BjB,QAASe,IAAUE,OACnBhB,WAAYc,IAAUE,OACtBpB,SAAUkB,IAAUE,OACpBlB,QAASgB,IAAUE,WAGvBpB,SAAUkB,IAAUI,KAGPzB","file":"ViewerRouting.bundle.04e72f094c4042f2bd27.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { utils, user } from '@ohif/core';\n//\nimport ConnectedViewerRetrieveStudyData from '../connectedComponents/ConnectedViewerRetrieveStudyData';\nimport useServer from '../customHooks/useServer';\nimport useQuery from '../customHooks/useQuery';\nconst { urlUtil: UrlUtil } = utils;\n\n/**\n * Get array of seriesUIDs from param or from queryString\n * @param {*} seriesInstanceUIDs\n * @param {*} location\n */\nconst getSeriesInstanceUIDs = (seriesInstanceUIDs, routeLocation) => {\n  const queryFilters = UrlUtil.queryString.getQueryFilters(routeLocation);\n  const querySeriesUIDs = queryFilters && queryFilters['seriesInstanceUID'];\n  const _seriesInstanceUIDs = seriesInstanceUIDs || querySeriesUIDs;\n\n  return UrlUtil.paramString.parseParam(_seriesInstanceUIDs);\n};\n\nfunction ViewerRouting({ match: routeMatch, location: routeLocation }) {\n  const {\n    project,\n    location,\n    dataset,\n    dicomStore,\n    studyInstanceUIDs,\n    seriesInstanceUIDs,\n  } = routeMatch.params;\n\n  console.log(\"In ViewerRouting\");\n\n  // Set the user's default authToken for outbound DICOMWeb requests.\n  // Is only applied if target server does not set `requestOptions` property.\n  //\n  // See: `getAuthorizationHeaders.js`\n  let query = useQuery();\n  const authToken = query.get('token');\n\n  if (authToken) {\n    user.getAccessToken = () => authToken;\n  }\n\n  const server = useServer({ project, location, dataset, dicomStore });\n  const studyUIDs = UrlUtil.paramString.parseParam(studyInstanceUIDs);\n  const seriesUIDs = getSeriesInstanceUIDs(seriesInstanceUIDs, routeLocation);\n\n  if (server && studyUIDs) {\n    return (\n      <ConnectedViewerRetrieveStudyData\n        studyInstanceUIDs={studyUIDs}\n        seriesInstanceUIDs={seriesUIDs}\n      />\n    );\n  }\n\n  return null;\n}\n\nViewerRouting.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      studyInstanceUIDs: PropTypes.string.isRequired,\n      seriesInstanceUIDs: PropTypes.string,\n      dataset: PropTypes.string,\n      dicomStore: PropTypes.string,\n      location: PropTypes.string,\n      project: PropTypes.string,\n    }),\n  }),\n  location: PropTypes.any,\n};\n\nexport default ViewerRouting;\n"],"sourceRoot":""}